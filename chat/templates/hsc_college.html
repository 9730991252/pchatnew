<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU"
      crossorigin="anonymous"
    />

    <title>HSC college </title>

    <!-- include libraries(jQuery, bootstrap) -->
    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <!-- include summernote css/js -->
    <link
      href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.js"></script>
    <style>
      #add_college {
        background-color: green;
        color: aliceblue;

        width: 150px;
        height: 30px;
      }
    </style>
  </head>
  <body>
    <!-- Example Code -->

    <div class="container">



    
      {% for c in college %}
      <div class="container border border-primary mb-5 pb-5">
      <h3 >{{c.name}}</h3>
      <h6>{{c.address}}</h6>
     
        <select class="form-control" required  id="c_year">
        <option value="">Select Year </option>
        <option value="1970">1970</option>
        <option value="1971">1971</option>
        <option value="1972">1972</option>
        <option value="1973">1973</option>
        <option value="1974">1974</option>
        <option value="1975">1975</option>
        <option value="1976">1976</option>
        <option value="1977">1977</option>
        <option value="1978">1978</option>
        <option value="1979">1979</option> 
        <option value="1980">1980</option>
        <option value="1981">1981</option>
        <option value="1982">1982</option>
        <option value="1983">1983</option>
        <option value="1984">1984</option>
        <option value="1985">1985</option>
        <option value="1986">1986</option>
        <option value="1987">1987</option>
        <option value="1988">1988</option>
        <option value="1989">1989</option>
        <option value="1990">1990</option>
        <option value="1991">1991</option>
        <option value="1992">1992</option>
        <option value="1993">1993</option>
        <option value="1994">1994</option>
        <option value="1995">1995</option>
        <option value="1996">1996</option>
        <option value="1997">1997</option>
        <option value="1998">1998</option>
        <option value="1999">1999</option>
        <option value="2000">2000</option>
        <option value="2001">2001</option>
        <option value="2002">2002</option>
        <option value="2003">2003</option>
        <option value="2004">2004</option>
        <option value="2005">2005</option>
        <option value="2006">2006</option>
        <option value="2007">2007</option>
        <option value="2008">2008</option>
        <option value="2009">2009</option> 
        <option value="2010">2010</option>
        <option value="2011">2011</option>
        <option value="2012">2012</option>
        <option value="2013">2013</option>
        <option value="2014">2014</option>
        <option value="2015">2015</option>
        <option value="2016">2016</option>
        <option value="2017">2017</option>
        <option value="2018">2018</option>
        <option value="2019">2019</option>
        <option value="2020">2020</option>
        <option value="2021">2021</option>
        <option value="2022">2022</option>
        <option value="2023">2023</option>
        </select>  <br>
    <a class="btn btn-primary" onclick=" select_year_hsc('{{c.id}}')">add this group</a>
  </div>
      {% endfor %}
 







      <div id="add_college_form"></div>
      <input type="button" value="add new college" id="add_college" onclick="add_new_college_form()">
    </div>
    <!-- End Example Code -->
    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
      crossorigin="anonymous"
    ></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js" integrity="sha384-W8fXfP3gkOKtndU4JGtKDvXbO53Wy8SZCQHczT5FMiiqmQfUpWbYdTil/SxwZgAN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js" integrity="sha384-skAcpIdS7UcVUC05LJ9Dxay8AXcDYfBJqt1CJ85S/CFujBsIzCIv+l9liuYLaMQ/" crossorigin="anonymous"></script>
    -->
    <script>
      function add_new_college_form(){
        let adds=document.getElementById('add_college_form');
        add=`<form>
  <div class="mb-3">
    <label for="college_name" class="form-label">Enter College name</label>
    <div id="emailHelp" class="form-text">Add only if the college name is not in the list</div>
    <input type="text" class="form-control" id="college_name" aria-describedby="emailHelp">
    
    <label for="address" class="form-label">address</label>
    <input type="text" class="form-control" id="address" aria-describedby="emailHelp">
  </div>
  <a class="btn btn-primary" onclick="add_new_college()">Submit</a>
  
</form>`
adds.innerHTML=add
document.getElementById('add_college').style.display='none';
      }

      function add_new_college(){
        const nameInputDom=document.getElementById('college_name')
        name =nameInputDom.value
        const addressInputDom=document.getElementById('address')
        address =addressInputDom.value
        if (name==''){
  alert('Please Enter college name')
  document.getElementById('college_name').style.borderColor ='red';return false;
  }
  if (address==''){
  alert('Please Enter college address')
  document.getElementById('address').style.borderColor ='red';return false;
  }

  $.ajax({
    url: "{% url 'add_new_college' %}",
    method: "GET",
    data: {
      name: name,
      address:address
        },
        success: function(data){
          nameInputDom.value =""
          addressInputDom.value  =""
          var f=document.getElementById('add_college');
          f.style.display='none';
        }
  })
      }


      function select_year_hsc(c_id){
  var y=document.getElementById('c_year');

  var y =y.options[y.selectedIndex].value;
  
  alert(y)
  hsc_year=y
  $.ajax({
    url: "{% url 'select_year_hsc' %}",
    method: "GET",
    data: {
      hsc_year: hsc_year,
      college_id:c_id
        },
        success: function (data){
          id= data.gid
          if (data.status == 1)
      alert("success added")
    
      if (data.status == 0)
         alert("already added")
         
          //window.open('https://www.google.com/');
          
        }
  })
}

    </script>
  </body>
</html>
